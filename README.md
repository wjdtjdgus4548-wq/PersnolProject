# PersnolProject


어뢰 게임 (Torpedo Game) — README

짧게: C++ 콘솔 기반의 작은 턴제 해전 미니게임입니다.
플레이어가 좌측 해역에서 어뢰/기뢰/소나 등을 이용해 우측의 적을 격침시키는 것이 목표입니다.

목차

개요

주요 기능(요약)

설치 · 빌드 · 실행

조작 방법(플레이 가이드)

게임 규칙 / 핵심 메커닉(상세)

파일 구조(요약)

클래스 설계 요약(간단)

디버깅 / 테스트 팁

확장 아이디어

알려진 이슈 & 주의사항

라이선스 / 크레딧

1. 개요

콘솔(ASCII) 기반의 간단한 전술 게임.

플레이어는 P이고, 적은 E, 아이템은 T/S/M/U, 기뢰는 m, 잔해는 *, 어뢰/기뢰 발사 경로는 > 또는 ~ 등으로 표시됩니다.

턴 기반이며 플레이어 행동(이동/발사 등) → 적 반응 → 턴 종료(엔드페이즈) 순으로 진행됩니다.

2. 주요 기능(요약)

어뢰 발사(범위 입력, 궤적 표시, 기본 3×3 폭발)

어설픈 업그레이드: 다음 어뢰를 지연(다음 턴 종료 시) 5×5 폭발으로 변경

기뢰 발사: 착지 지점에 m으로 남아, 적이 5×5 반경(chebyshev 거리 2) 안으로 들어오면 폭발

소나: 우측으로 소나를 쏘아 일정 시간 적 위치를 표시

폭발 시 잔해(*) 생성(이동 불가)

폭발 보상: 폭발로 적을 격침하면 어뢰 보상(설정에 따라 Kills 만큼 증가 또는 +1)

적 AI: 랜덤 이동(플레이어 행동 후 반응, 턴 종료 시 추가 이동)

아이템 스폰 및 획득(어뢰/소나/기뢰/업그레이드)

트레일(발사 궤적)은 턴 사이에 표시되고 다음 턴 시작 시 제거

3. 설치 · 빌드 · 실행

프로젝트 파일: SubGame.h, SubGame.cpp, main.cpp (또는 클래스 버전: GameManager.h/cpp, Player.h, Enemy.h, main.cpp)
터미널 / 콘솔에서:

# 컴파일 (g++)
g++ -std=c++11 main.cpp SubGame.cpp -o torpedogame

# 실행
./torpedogame


Windows (MinGW) 등에서도 동일하게 컴파일 가능합니다. IDE(Visual Studio 등)는 새 프로젝트에 파일들을 추가하고 빌드하면 됩니다.

4. 조작 방법(플레이 가이드)

기본 입력: 메뉴에서 숫자 입력으로 선택

1 이동 (WASD로 한 칸씩 이동; Q로 종료)

2 어뢰 발사 (거리 입력)

3 소나 사용

7 기뢰 발사 (거리 입력)

5 턴 종료

4 디버그: 적 스폰

9 게임 종료

HUD 예시: [턴: 101][잔여 이동:4][P:13,1] 어뢰:3 소나:6 지뢰:1 ... (업그레이드:있음)

발사 입력은 main에서 받고, 무기 함수는 인자(거리)를 이용해 발사 궤적/착지를 계산합니다.

5. 게임 규칙 / 핵심 메커닉 (상세)

맵

크기: MapHeight x MapWidth (기본 31 x 41)

좌측은 플레이어 진영, 중앙에는 분할 벽(통과 규칙 있음), 우측은 적 진영

어뢰 (Torpedo)

발사 후 우측으로 직진. 사용 시 gTrail로 궤적 표시(턴 종료 후 다음 턴 시작 시 제거).

기본: 착지 지점에서 반경 1(3×3) 폭발(DoExplosionAt(h,w,1)).

업그레이드: gHasUglyPatch == true이면 그 발사는 지연폭발로 예약되어 다음 턴 종료 시 반경 2(5×5)로 폭발. 업그레이드는 소비됨.

보상: 폭발로 적을 격침하면 어뢰와 소나가 보상으로 증가(구현 옵션: Kills 만큼 또는 +1).

기뢰 (Mine)

발사 후 착지 지점에 m으로 남음(수명 5턴 기본).

기뢰는 해당 칸에 고정되고, 주변(chebyshev 거리 2)에 적이 들어오면 폭발.

폭발 시 5×5(반경2) 범위를 DoExplosionAt(...,2)로 처리하고 잔해를 남김.

소나 (Sonar)

발사하면 플레이어 기준 우측 일정 영역에 gSonar 표시가 들어가며(시간 제한), 소나가 켜지면 ApplySonarOverlay가 적 위치를 E로 표시.

적 스폰 & AI

기본 적 최대 수: 5 (MaxEnemies).

스폰 주기: gTurn % 5 == 0 일 때 소환(구현값).

행동: 플레이어의 행동(이동/발사 등)에 대해 일부 스텝 랜덤 이동, 턴 종료 시 추가 이동(2스텝).

턴/트레일 관리

StartTurn()에서 트레일/소나 트레일 정리(그래야 발사 직후 플레이어가 궤적을 확인할 수 있음).

EndTurn()에서 적 이동(End phase), 소나 tick, 기뢰 수명/트리거 체크, 아이템 수명 감소, 적 소환, gTurn++ 수행.

아이템

종류: ITEM_TORPEDO, ITEM_SONAR, ITEM_MINE, ITEM_UPGRADE.

획득 시 즉시 효과(예: 어뢰+1, 업그레이드 플래그 세팅 등).

업그레이드 획득 시 안내문구가 출력되도록 구현함.

6. 파일 구조(요약)

SubGame.h — 상수, 구조체/클래스 선언, 함수 프로토타입(절차형 버전)

SubGame.cpp — 게임 로직 구현(절차형 또는 클래스형 Game 구현)

main.cpp — 엔트리(초기화 및 메인 루프 호출)


7. 클래스 설계(요약 세 줄 버전)

GameManager — 맵·상태·턴 흐름·폭발/스폰/렌더 담당

Player — 좌표(h,w) + 입력/발사 요청 (로직은 GameManager 위임)

Enemy — 좌표(h,w), alive, StepRandom() 같은 간단한 이동 책임



